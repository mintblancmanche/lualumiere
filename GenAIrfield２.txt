---Generate Base Runway
local side = ScenEdit_PlayerSide()
local name = 'Kefla Runway #1'
local unittype = 'Facility'
local dbid = 35
local lat = '63.59.00'
local lon = 'W22.36.30'
local heading = 0
ScenEdit_AddUnit({side = side, name = name, type = unittype, dbid = dbid, lat = lat, lon = lon, heading = heading})

local name = 'Kefla RAP #1'
local dbid = 353
local rap1 = World_GetPointFromBearing({latitude = lat, longitude = lon, bearing = heading, distance = 1})
ScenEdit_AddUnit({side = side, name = name, type = unittype, dbid = dbid, lat = rap1.latitude, lon = rap1.longitude, heading = heading})
local name = 'Kefla RAP #2'
local rap2 = World_GetPointFromBearing({latitude = lat, longitude = lon, bearing = heading, distance = 0.5})
ScenEdit_AddUnit({side = side, name = name, type = unittype, dbid = dbid, lat = rap2.latitude, lon = rap2.longitude, heading = heading})
local name = 'Kefla RAP #3'
local rap3 = World_GetPointFromBearing({latitude = lat, longitude = lon, bearing = heading+180, distance = 0.5})
ScenEdit_AddUnit({side = side, name = name, type = unittype, dbid = dbid, lat = rap3.latitude, lon = rap3.longitude, heading = heading})
local name = 'Kefla RAP #4'
local rap4 = World_GetPointFromBearing({latitude = lat, longitude = lon, bearing = heading+180, distance = 1})
ScenEdit_AddUnit({side = side, name = name, type = unittype, dbid = dbid, lat = rap4.latitude, lon = rap4.longitude, heading = heading})
----
local left = World_GetPointFromBearing({latitude = rap1.latitude, lon = rap1.longitude, bearing = 270, distance = 0.27})
local right = World_GetPointFromBearing({latitude = rap1.latitude, lon = rap1.longitude, bearing = 270, distance = 0.27})
---
---Second Runway
local latitude = '63.59.00'
local longitude = 'W22.36.30'
local left = World_GetPointFromBearing({latitude = latitude, lon = longitude, bearing = 270, distance = 0.27})

local side = ScenEdit_PlayerSide()
local name = 'Kefla Runway #2'
local unittype = 'Facility'
local dbid = 35
local lat = left.latitude
local lon = left.longitude
local heading = 0
ScenEdit_AddUnit({side = side, name = name, type = unittype, dbid = dbid, lat = lat, lon = lon, heading = heading})

local name = 'Kefla RAP #5'
local dbid = 353
local rap1 = World_GetPointFromBearing({latitude = lat, longitude = lon, bearing = heading, distance = 1})
ScenEdit_AddUnit({side = side, name = name, type = unittype, dbid = dbid, lat = rap1.latitude, lon = rap1.longitude, heading = heading})
local name = 'Kefla RAP #6'
local rap2 = World_GetPointFromBearing({latitude = lat, longitude = lon, bearing = heading, distance = 0.5})
ScenEdit_AddUnit({side = side, name = name, type = unittype, dbid = dbid, lat = rap2.latitude, lon = rap2.longitude, heading = heading})
local name = 'Kefla RAP #7'
local rap3 = World_GetPointFromBearing({latitude = lat, longitude = lon, bearing = heading+180, distance = 0.5})
ScenEdit_AddUnit({side = side, name = name, type = unittype, dbid = dbid, lat = rap3.latitude, lon = rap3.longitude, heading = heading})
local name = 'Kefla RAP #8'
local rap4 = World_GetPointFromBearing({latitude = lat, longitude = lon, bearing = heading+180, distance = 1})
ScenEdit_AddUnit({side = side, name = name, type = unittype, dbid = dbid, lat = rap4.latitude, lon = rap4.longitude, heading = heading})

---Generate Tarmac
local status = ScenEdit_GetUnit({name = "Kefla Runway #2"})
local point = World_GetPointFromBearing({latitude = status.latitude, lon = status.longitude, bearing = 270, distance = 0.27})

local bearing = 0
local distance = 0.12

local side = ScenEdit_PlayerSide()
local unittype = 'Facility'
local dbid = 281
local heading = 0

for i = 1, 8 do
  local number = i + 0
  local newunit = "Kefla 2x Med Tarmac #" ..number
  local point = World_GetPointFromBearing({latitude = left.latitude, longitude = left.longitude, bearing = bearing, distance = (distance*8) - (distance*i) })
  ScenEdit_AddUnit({side = side, name = newunit, type = unittype, dbid = dbid, lat = point.latitude, lon = point.longitude, heading = heading})
end

for i = 9, 15 do
  local number = i + 0
  local newunit = "Kefla 2x Med Tarmac #" ..number
  local point = World_GetPointFromBearing({latitude = left.latitude, longitude = left.longitude, bearing = bearing+180, distance = distance*(i-8) })
  ScenEdit_AddUnit({side = side, name = newunit, type = unittype, dbid = dbid, lat = point.latitude, lon = point.longitude, heading = heading})
end

---Generate HAS
local status = ScenEdit_GetUnit({name = "Kefla 2x Med Tarmac #16"})
local point = World_GetPointFromBearing({latitude = status.latitude, lon = status.longitude, bearing = 270, distance = 0.48})

local side = ScenEdit_PlayerSide()
local name = 'Kefla HAS #1'
local unittype = 'Facility'
local dbid = 27
local heading = 0
ScenEdit_AddUnit({side = side, name = name, type = unittype, dbid = dbid, lat = point.latitude, lon = point.longitude, heading = heading})

local point2 = World_GetPointFromBearing({latitude = status.latitude, lon = status.longitude, bearing = 270, distance = 0.36})
local name = 'Kefla HAS #2'
ScenEdit_AddUnit({side = side, name = name, type = unittype, dbid = dbid, lat = point2.latitude, lon = point2.longitude, heading = heading})

local point3 = World_GetPointFromBearing({latitude = status.latitude, lon = status.longitude, bearing = 270, distance = 0.24})
local name = 'Kefla HAS #3'
ScenEdit_AddUnit({side = side, name = name, type = unittype, dbid = dbid, lat = point3.latitude, lon = point3.longitude, heading = heading})

local point4 = World_GetPointFromBearing({latitude = status.latitude, lon = status.longitude, bearing = 270, distance = 0.12})
local name = 'Kefla HAS #4'
ScenEdit_AddUnit({side = side, name = name, type = unittype, dbid = dbid, lat = point4.latitude, lon = point4.longitude, heading = heading})

892 ATC Radar