◇ウェイポイントを削除する
local guid = '87YZY5-0HMNOB5T4SJ1U'
ScenEdit_SetUnit({guid=guid, course= {} })

◇陣営の全ユニット
local units = VP_GetSide({side="NEUTRAL"}).units
print(units)

for k, v in pairs(units) do
    ScenEdit_SetUnit({guid=v.guid, course= {} })
end

◇45度旋回
math.randomseed (os.time() )
local zig = 1
local d2 = math.random(0,1)
if d2 == 0 then zig = -1
end

local unit = ScenEdit_GetUnit({guid='87YZY5-0HMH14ABSTJ1V'}) -- Belgrano SAG
local distance = unit.speed/4
local bearing = unit.heading+45*zig
local course = World_GetPointFromBearing({lat=unit.latitude,
lon=unit.longitude, distance=distance, bearing=bearing})

ScenEdit_SetDoctrine ({guid=guid}, {ignore_plotted_course=false})
ScenEdit_SetUnit({guid=guid, course= {[1]=course} })

--local waypoint = ScenEdit_GetReferencePoint({side="Argentina", name="Waypoint #1"})
--local course = Tool_Bearing(unit.guid,{lat=waypoint.latitude ,lon=waypoint.longitude})

◇針路を変更する (1)： ウェイポイントを直接変更する（ついでに攻撃時ウェイポイント無視を無効にする）
local guid = '87YZY5-0HMNOB5T4SJ1U'
local unit = ScenEdit_GetUnit({guid=guid})
local distance = unit.speed*3
local bearing = 150

local waypoint = World_GetPointFromBearing ({lat=unit.latitude, lon=unit.longitude,
distance=distance, bearing=bearing})
ScenEdit_SetDoctrine ({guid=guid}, {ignore_plotted_course=false})
ScenEdit_SetUnit({guid=guid, course= {[1]=waypoint} })

local unit = ScenEdit_GetUnit({guid='87YZY5-0HMOQGQ45RN98'})
local wp1 = World_GetPointFromBearing({latitude=unit.latitude,
longitude= unit.longitude, bearing=0, distance=50})
local wp2 = World_GetPointFromBearing({latitude=wp1.latitude,
longitude= wp1.longitude, bearing=45, distance=50})
local wp3 = World_GetPointFromBearing({latitude=wp2.latitude,
longitude= wp2.longitude, bearing=180, distance=50})

local course = {
[1] = {TypeOf = 'ManualPlottedCourseWaypoint', latitude=wp1.latitude, longitude= wp1.longitude,
presetAltitude=6, presetThrottle=2},
[2] = { TypeOf = 'ManualPlottedCourseWaypoint', latitude=wp2.latitude, longitude= wp2.longitude,
presetAltitude=6, presetThrottle=2},
[3] = {TypeOf = 'LandingMarshal', latitude=wp3.latitude, longitude= wp3.longitude,
presetAltitude=6, presetThrottle=2},
}
unit.course=course

--"LandingMarshal"に到達後基地に帰投する
local grpname = "Flt Vulcano"
ScenEdit_GetUnit({name="A-4B #1 (Capitan P. Marcos Carballo)"}).group = grpname
ScenEdit_GetUnit({name="A-4B #2 (Teniente Carlos Rinke)"}).group = grpname
--local group = ScenEdit_GetUnit({name=grpname}).group

local unittable = {name='Flight Vulture18', guid='L1VD8C-0HN3OOM9I7NS3'}
local group = ScenEdit_GetUnit({guid = unittable.guid}).group
local unit  = ScenEdit_GetUnit({guid = group.unitlist[1]})
local base  = ScenEdit_GetUnit({guid = unit.base.guid})

local wp1 = World_GetPointFromBearing({latitude = base.latitude, longitude = base.longitude, distance=5, bearing = 0})
local wp2 = World_GetPointFromBearing({latitude = wp1.latitude,  longitude = wp1.longitude,  distance=5, bearing = 90})
local wp3 = World_GetPointFromBearing({latitude = wp2.latitude,  longitude = wp2.longitude,  distance=30, bearing = 45})
local wp4 = World_GetPointFromBearing({latitude = wp3.latitude,  longitude = wp3.longitude,  distance=30, bearing = 45})
local wp5 = World_GetPointFromBearing({latitude = wp4.latitude,  longitude = wp4.longitude,  distance=20, bearing = 45})
local wp6 = World_GetPointFromBearing({latitude = wp5.latitude,  longitude = wp5.longitude,  distance=20, bearing = 45})
local wp7 = World_GetPointFromBearing({latitude = wp6.latitude,  longitude = wp6.longitude,  distance=10, bearing = 180})
local wp8 = World_GetPointFromBearing({latitude = wp7.latitude,  longitude = wp7.longitude,  distance=40, bearing = 225})
local wp9 = World_GetPointFromBearing({latitude = wp8.latitude,  longitude = wp8.longitude,  distance=40, bearing = 225})
local wpz = World_GetPointFromBearing({latitude = base.latitude, longitude = base.longitude, distance=5, bearing = 180})
local wpy = World_GetPointFromBearing({latitude = wpz.latitude,  longitude = wpz.longitude,  distance=5, bearing = 90})

--local wp3 = ScenEdit_GetReferencePoint({side=unit.side, name="RP-123"})

course = {}
table.insert(course, {TypeOf = 'HoldStart',      Description = 'Waypoint1', latitude = wp1.latitude,  longitude = wp1.longitude, PresetThrottle = 'Loiter', DesiredAltitude = '36000FT'})
table.insert(course, {TypeOf = 'HoldEnd',        Description = 'Waypoint2', latitude = wp2.latitude,  longitude = wp2.longitude, PresetThrottle = 'Cruise', DesiredAltitude = '36000FT'})
table.insert(course, {TypeOf = 'StrikeIngress',  Description = 'Waypoint3', latitude = wp3.latitude,  longitude = wp3.longitude, PresetThrottle = 'Cruise', DesiredAltitude = '36000FT'})
table.insert(course, {TypeOf = 'StrikeIngress',  Description = 'Waypoint4', latitude = wp4.latitude,  longitude = wp4.longitude, PresetThrottle = 'Full',   DesiredAltitudeTF = '2000FT', TF = 'True'})
table.insert(course, {TypeOf = 'InitialPoint',   Description = 'Waypoint5', latitude = wp5.latitude,  longitude = wp5.longitude, PresetThrottle = 'Full',   DesiredAltitudeTF = '2000FT', TF = 'True'})
table.insert(course, {TypeOf = 'Target',         Description = 'Waypoint6', latitude = wp6.latitude,  longitude = wp6.longitude, PresetThrottle = 'Full',   DesiredAltitudeTF = '2000FT', TF = 'True'})
table.insert(course, {TypeOf = 'StrikeEgress',   Description = 'Waypoint7', latitude = wp7.latitude,  longitude = wp7.longitude, PresetThrottle = 'Cruise', DesiredAltitude = '36000FT'})
table.insert(course, {TypeOf = 'StrikeEgress',   Description = 'Waypoint8', latitude = wp8.latitude,  longitude = wp8.longitude, PresetThrottle = 'Cruise', DesiredAltitude = '36000FT'})
table.insert(course, {TypeOf = 'StrikeEgress',   Description = 'Waypoint9', latitude = wp9.latitude,  longitude = wp9.longitude, PresetThrottle = 'Cruise', DesiredAltitude = '36000FT'})
table.insert(course, {TypeOf = 'LandingMarshal', Description = 'Waypoint10',latitude = wpy.latitude,  longitude = wpy.longitude, PresetThrottle = 'Cruise', DesiredAltitude = '5000FT'})
table.insert(course, {TypeOf = 'Land',           Description = 'Waypoint11',latitude = wpz.latitude,  longitude = wpz.longitude, PresetThrottle = 'Loiter', DesiredAltitude = '2000FT'})
unit.course = course

--TF 'terrain following' 

◇潜水艦の速力深度を変える
local guid= '87YZY5-0HMSMO15Q20T6' --oscar
local maketurnsfor = 5
ScenEdit_SetUnit({guid=guid, manualSpeed=maketurnsfor})

local guid = '13a966e0-f257-4de5-9cc2-84d8ba94962b'
local makemydepth = math.floor(131/3.28084+0.5)
ScenEdit_SetUnit({guid=guid, manualAltitude=-makemydepth})

local guid='add0340b-64a8-40e8-8f9a-f8cc56ed74d8'
local depth = 200
ScenEdit_SetUnit({guid=guid, depth=-math.floor(0.5+depth/3.28084) })

--speed
ScenEdit_SetDoctrine ({guid=guid}, {ignore_plotted_course=false})
ScenEdit_SetUnit({guid=guid, course= {[1]=course} })

math.randomseed(os.time() )
local D100 = math.random(1,100)
if      D100 <=1	then   spd = 5
elseif  D100 <=2	then   spd = 8
elseif  D100 <=3	then   spd = 10
elseif  D100 <=98	then   spd = 12
elseif  D100 <=99 	then   spd = 15
elseif  D100 <=100	then   spd = 20
end

local guid = '87YZY5-0HMOV1PL4G8AQ'
local unit = ScenEdit_GetUnit({guid=guid})
ScenEdit_SetUnit({guid=guid, manualSpeed=spd})
ScenEdit_SetUnit({guid=guid, sprintDrift=false})

--getaway
local guid= '87YZY5-0HMH14ABSSN4G' --Bel
local unit = ScenEdit_GetUnit({guid=guid}) 
local contact = ScenEdit_UnitC().guid
local spd = 25
local distance = spd*1
local bearing = Tool_Bearing(contact, guid)
local course = World_GetPointFromBearing({lat=unit.latitude,
lon=unit.longitude, distance=distance, bearing=bearing})

ScenEdit_SetDoctrine ({guid=guid}, {ignore_plotted_course=false})
ScenEdit_SetUnit({guid=guid, course= {[1]=course} })
ScenEdit_SetUnit({guid=guid, manualSpeed=spd})


■針路に応じて速力を変えうｒ
local guid = '5ff9a82b-2f29-4425-a8f7-3ea3ecf02a92' --Knox
local unit = ScenEdit_GetUnit({guid=guid})
print(unit.heading)

local maketurnsfor
if unit.heading >135 and unit.heading <225 then
    maketurnsfor = 12
else
    makrnsfor = 5
end

ScenEdit_SetUnit({guid=guid, manualSpeed=maketurnsfor})